<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#121B25">

  <!-- Safari on iOS -->
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Microsoft Edge/Windows -->
  <meta name="msapplication-navbutton-color" content="#121B25">
  <meta name="msapplication-TileColor" content="#121B25">
  <title>Par5Escapes</title>

  <!-- Bootstrap's CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <!-- Custom style CSS-->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/searchresults.css">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">

</head>

<body data-bs-spy="scroll" data-bs-target="#navbar-example2" tabindex="0">

  <style>
    body{
      background-image: url(images/search_background.png) !important;
    }
  </style>

<!----------------------------------HEADER-START------------------------------------->
<!-- Encapsulated Header Wrapper -->
<div class="encapsulated-header-wrapper">
      <!-- Main Nav -->
      <div class="main-nav">
          <!-- Logo -->
          <div class="logo">
             <a href="index.html"> <img src="images/par5logo_h.png" alt="Logo"></a>
          </div>

      <!-- Hamburger Menu (Only visible on mobile) -->
      <div class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </div>
    
      
      <!-- Side Menu for Mobile -->
      <div class="side-menu" id="sideMenu">
     <!-- Side Menu Header with Logo and Close Button -->
     <div class="side-menu-header">
        <!-- Logo in Side Menu -->
        <div class="logo">
          <a href="index.html"><img src="images/par5logo_h.png" alt="Logo"></a>
        </div>
        <!-- Close Button -->
        <div class="close-btn" id="closeNav">&times;</div>
      </div>
     <!-- Dropdown for Destinations -->
     <button class="dropdown-btn">Destinations <i class="fas fa-chevron-down dropdown-arrow"></i></button>
     <div class="dropdown-content">
       <a href="#">Turkey</a>
       <a href="#">Spain</a>
       <a href="#">Portugal</a>
       <a href="#">UAE</a>
       <a href="#">France</a>
       <a href="#">United Kingdom</a>
       <a href="#">Morocco</a>
       <a href="#">Oman</a>
     </div>
    <a href="#">Courses</a>
    <a href="#">Offers</a>
    <a href="#">Contact Us</a>
      </div>
  
      <!-- Navigation Links -->
        <div class="nav-links">
            <a href="#" class="nav-item">Destinations<i class="fas fa-chevron-down"></i></a>
            <!-- Dropdown -->
            <div class="dropdown-menu destinations-menu">
                <div class="dest-column">
                    <a href="#">Portugal</a>
                    <a href="#">Spain</a>
                    <a href="#">Turkey</a>
                    <a href="#">Canary Islands</a>
                    <a href="#">Greece</a>
                    <a href="#">Morocco</a>
                </div>
                <div class="dest-column">
                    <a href="#">The UK</a>
                    <a href="#">Ireland</a>
                    <a href="#">Abu Dhabi</a>
                    <a href="#">Dubai</a>
                    <a href="#">South Africa</a>
                    <a href="#">Mauritius</a>
                </div>
                <div class="dest-column">
                    <a href="#">Cyprus</a>
                    <a href="#">France</a>
                    <a href="#">USA</a>
                    <a href="#">Caribbean</a>
                    <a href="#">Italy</a>
                    <a href="#">Belgium</a>
                </div>
                <div class="dest-column">
                    <a href="#">Bulgaria</a>
                    <a href="#">Ras Al Khaimah</a>
                    <a href="#">Switzerland</a>
                    <a href="#">Tunisia</a>
                </div>
            </div>

            <a href="#">Courses</a>
            <a href="#">Tuition Holidays</a>
            <a href="#">Offers</a>
            <a href="#">Inspiration</a>
        </div>

        <!-- Contact Us & Opening Hours -->
        <div class="d-flex align-items-center">
            
            <div class="contact-us">
                <button>Contact Us <i class="fas fa-chevron-down"></i></button>
                <!-- Contact Us Dropdown -->
                <div class="contact-us-dropdown">
                    <p>Call us now on <strong>01342 811 777</strong></p>
                    <p>Opening times:</p>
                    <p>Mon-Fri: 8am - 6pm</p>
                    <p>Sat: 9am - 1pm</p>
                    <p>Sun: Closed</p>
                    <a href="#">Request a callback</a>
                    <a href="#">Request a quote</a>
                    <a href="#">Ask a question</a>
                </div>
            </div>
        </div>
      </div>
</div>
<!--------------------------------HEADER-END---------------------------------->

<!----------------------------------SearchResultsBody-START-------------------------->
<div class="search-filter-section">
  <!-- Filter container -->
  <div class="filter-container">
      <!-- Destination Field with Icon and Placeholder -->
      <div class="filter-item">
          <span class="icon">&#x1F4CD;</span> <!-- Location pin icon -->
          <select id="destination" aria-label="Choose your destination">
              <option value="" disabled selected hidden>Choose your destination...</option>
              <option value="Turkey">Turkey</option>
              <option value="Spain">Spain</option>
              <option value="Portugal">Portugal</option>
              <option value="USA">USA</option>
              <!-- Add more options as needed -->
          </select>
      </div>

      <!-- Arrival Date Field with Placeholder -->
      <div class="filter-item">
          <input type="date" id="arrivalDate" placeholder="Arrival Date">
      </div>

      <!-- Search Button -->
      <button onclick="searchTours()">SEARCH</button>
  </div>
</div>

<!-- Placeholder for dynamically loading tour packages -->
<div class="tour-packages-section" id="tour-packages">
  <!-- Tour packages will be displayed here based on search results -->
</div>

<script>
function searchTours() {
  const destination = document.getElementById('destination').value;
  const arrivalDate = document.getElementById('arrivalDate').value;

  // Validate inputs
  if (!destination || !arrivalDate) {
    alert("Please select a destination and arrival date.");
    return;
  }

  // AJAX request to fetch data
  fetch('fetch_packages.php', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded',
    },
    body: `location=${encodeURIComponent(destination)}&search_date=${encodeURIComponent(arrivalDate)}`
  })
    .then(response => response.json())
    .then(data => {
// Target the correct container for search results
const searchResultsContainer = document.querySelector('.search-results-container');
      searchResultsContainer.innerHTML = ''; // Clear previous results

      // Render cards dynamically
      data.forEach(package => {
        const card = `
          <div class="golf-resort-card">
            <div class="left-section">
              <div class="main-image-container">
                <div class="green-bar">
                  <span><i class="fas fa-hotel"></i> Golf Resort</span>
                  <span><i class="fas fa-map-marker-alt"></i> ${package.location}</span>
                </div>
                <img src="images/${package.main_image}" alt="${package.resort_name}" class="main-image">
              </div>
              <div class="preview-slider">
                <button class="slider-btn prev-btn">❮</button>
                <div class="slider-images">
                  <img src="images/preview1.jpg" alt="Preview 1" class="preview-image">
                  <img src="images/preview2.jpg" alt="Preview 2" class="preview-image">
                </div>
                <button class="slider-btn next-btn">❯</button>
              </div>
              <a href="#" class="see-details">See hotel details.</a>
            </div>
            <div class="right-section">
              <div class="hotel-header">
                <h3>${package.resort_name}</h3>
                <div class="stars">${'★'.repeat(package.star_rating)}</div>
              </div>
              <div class="tags">
                <span class="tag">${package.tag1}</span>
                <span class="tag">${package.tag2}</span>
              </div>
              <p class="description">${package.description}</p>
              <h4>Recommended breaks</h4>
              <table class="packages-table">
                <thead>
                  <tr>
                    <th>Nights</th>
                    <th>Board</th>
                    <th>Rounds</th>
                    <th>Details</th>
                    <th>Price (pp)</th>
                  </tr>
                </thead>
                <tbody>
                  ${package.recommended_breaks.map(breakData => `
                    <tr>
                      <td>${breakData.nights}</td>
                      <td>${breakData.board}</td>
                      <td>${breakData.rounds}</td>
                      <td>${breakData.details}</td>
                      <td><img src="icons/${breakData.badge}" alt="Badge"> £${breakData.price}</td>
                    </tr>`).join('')}
                </tbody>
              </table>
              <button class="view-breaks">See all breaks</button>
            </div>
          </div>
        `;
        searchResultsContainer.innerHTML += card; // Append card to the correct container
      });
    })
    .catch(error => console.error('Error fetching packages:', error));
}
</script>
<div class="page-content">
<!-- Main container for filter and results -->
<div class="content-container" id="results-container">
<!-- Filter Section -->

<script>
  function fetchResults() {
      const destination = document.getElementById("destination").value;
      const arrivalDate = document.getElementById("arrival-date").value;
  
      // Make sure inputs are not empty
      if (!destination || !arrivalDate) {
          alert("Please select both destination and arrival date.");
          return;
      }
  
      // AJAX request to PHP script
      const xhr = new XMLHttpRequest();
      xhr.open("POST", "fetch_results.php", true);
      xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
      xhr.onreadystatechange = function() {
          if (xhr.readyState === 4 && xhr.status === 200) {
              document.getElementById("results-container").innerHTML = xhr.responseText;
          }
      };
      xhr.send("destination=" + encodeURIComponent(destination) + "&arrivalDate=" + encodeURIComponent(arrivalDate));
  }
  </script>
<!-- Search Results Section -->
<div class="search-results">
  <div class="search-results-container">
      <!-- Example Golf Resort Card -->
     <!------New card-->
     <!---end card-->
</div>
</div>
<div class="filter-section">
  <div class="filter-group">
      <label for="arrival-date">Arrival Date</label>
      <input type="date" id="arrival-date" placeholder="Select Date">
  </div>

  <h3>View by</h3>
  <div class="radio-group">
      <label><input type="radio" name="view" checked> Accommodation</label>
      <label><input type="radio" name="view"> Golf Course</label>
  </div>

  <h3>Filter (24 breaks) <span class="reset-link">RESET</span></h3>

  <div class="filter-group">
      <label for="nights">Number of nights</label>
      <select id="nights">
          <option value="1-3">1-3</option>
          <option value="4-6">4-6</option>
          <option value="7+">7+</option>
      </select>
  </div>

  <div class="filter-group">
      <label for="rounds">Number of rounds</label>
      <select id="rounds">
          <option value="1-2">1-2</option>
          <option value="3-4">3-4</option>
          <option value="5+">5+</option>
      </select>
  </div>
</div>
</div>
</div>
<!----------------------------------SearchResultsBody-END-------------------------->

<!----------------------------FOOTER-START--------------------------------->
<footer class="footer-section">
  <style>
    .footer-section{
      padding: 0 !important;
      height: 0 !important;
    }
    .footer-bottom{
      border-top: 1px solid #000000 !important;
      margin-left: -0.5rem;
    }
  </style>
  <!-- Bottom Section -->
  <div class="footer-bottom">
    <p>© Par5 Escapes 2024 - All rights reserved.</p>
  </div>
</footer>
<!----------------------------FOOTER-END--------------------------------->

<!----------------------------LeftCornerABTA-START--------------------------------->
<div class="certification-logos-container">
  <img src="images/abta-logo-B7ACA4B9F5-seeklogo.com.png" alt="Certification 1" class="logo">
  <img src="images/ATOL_Protected-logo-39861CA549-seeklogo.com.png" alt="Certification 2" class="logo">
</div>
<!----------------------------LeftCornerABTA-END-------------------------------->

<!------------------------GLOBAL-SCRIPTS-START---------------------->
<script src="js/mobilehamburger.js"></script>
<script src="js/slider.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript" src="//widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js" async></script>
<script src="js/trustpilot.js"></script>
<script src="js/popgolfs.js"></script>
<script src="js/whychoose.js"></script>
<script src="js/topgetaways.js"></script>
<script src="js/specialoffers.js"></script>
<script src="js/searchresults2.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!------------------------GLOBAL-SCRIPTS-END---------------------->

</body>
</html>